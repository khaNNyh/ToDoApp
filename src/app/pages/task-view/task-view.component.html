<div class="centered-content">
  <div class="task-manager-container">
    <div class="sidebar">
      <h1 class="title has-text-primary">Lists</h1>

      <div class="list-menu">
        <div
          *ngFor="let list of dataFromLists; let i = index"
          (click)="getAllTasksByListId(i + 1); setCurrentTaskList(i + 1)"
          class="list-menu-item"
        >
          <p>{{ list.name }}</p>
          <div
            *ngIf="
              (deleteModeIsOn === false && list.id !== deleteModeIsOnFor) ||
              (deleteModeIsOn === true && list.id !== deleteModeIsOnFor) ||
              (deleteModeIsOn === false && list.id === deleteModeIsOnFor)
            "
            class="list-menu-item-buttons"
          >
            <button mat-icon-button color="accent">
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-icon-button
              color="warn"
              (click)="deleteModeIsOn = true; deleteModeIsOnFor = i + 1"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
          <div
            *ngIf="deleteModeIsOn === true && list.id === deleteModeIsOnFor"
            class="list-menu-item-buttons"
          >
            <button
              (click)="deleteListById(list.id)"
              mat-icon-button
              color="warn"
            >
              <mat-icon>delete</mat-icon>
            </button>
            <button
              (click)="deleteModeIsOn = false"
              mat-icon-button
              color="accent"
            >
              <mat-icon>close</mat-icon>
            </button>
          </div>
        </div>
      </div>
      <button
        class="button is-primary has-text-white"
        routerLink="/new-list"
        (click)="showData()"
      >
        + New list
      </button>
    </div>
    <div class="task-list-container has-bg-light">
      <h1 class="title has-text-primary">Tasks</h1>
      <div
        *ngFor="let task of dataFromTasks.tasks; let i = index"
        class="task-container"
      >
        <div
          (click)="changeTaskState(task)"
          [class.complete]="task.state === 'DONE'"
          class="task"
        >
          <p>{{ task.content }}</p>
        </div>
        <div
          (click)="changeSubtaskState(subtask)"
          *ngFor="let subtask of task.subtasks"
          [class.complete]="subtask.state === 'DONE'"
          class="sub-task"
        >
          <p>{{ subtask.content }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
